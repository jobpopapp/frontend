<div class="register-page min-vh-100 d-flex align-items-center bg-gray">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-12 col-md-8 col-lg-6">
        <!-- Logo Section -->
        <div class="text-center mb-4">
          <h1 class="brand-logo text-primary fw-bold">JobPop</h1>
          <p class="text-muted mb-0">Company Portal</p>
          <h4 class="fw-semibold mt-3 mb-1">Create Your Account</h4>
          <p class="text-muted">
            Join thousands of companies hiring top talent
          </p>
        </div>

        <!-- Registration Form Card -->
        <div class="card shadow-md border-0">
          <div class="card-body p-4">
            <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" novalidate>
              <!-- Company Name -->
              <div class="mb-3">
                <label for="name" class="form-label">Company Name</label>
                <input
                  type="text"
                  id="name"
                  formControlName="name"
                  class="form-control"
                  [class.is-invalid]="isFieldInvalid('name')"
                  placeholder="Enter your company name"
                />
                <div class="invalid-feedback" *ngIf="isFieldInvalid('name')">
                  <small *ngIf="registerForm.get('name')?.errors?.['required']"
                    >Company name is required</small
                  >
                  <small *ngIf="registerForm.get('name')?.errors?.['minlength']"
                    >Company name must be at least 2 characters</small
                  >
                </div>
              </div>

              <!-- Email -->
              <div class="mb-3">
                <label for="email" class="form-label">Business Email</label>
                <input
                  type="email"
                  id="email"
                  formControlName="email"
                  class="form-control"
                  [class.is-invalid]="isFieldInvalid('email')"
                  placeholder="Enter your business email"
                />
                <div class="invalid-feedback" *ngIf="isFieldInvalid('email')">
                  <small *ngIf="registerForm.get('email')?.errors?.['required']"
                    >Email is required</small
                  >
                  <small *ngIf="registerForm.get('email')?.errors?.['email']"
                    >Please enter a valid email</small
                  >
                </div>
              </div>

              <!-- Phone -->
              <div class="mb-3">
                <label for="phone" class="form-label">Phone Number</label>
                <input
                  type="tel"
                  id="phone"
                  formControlName="phone"
                  class="form-control"
                  [class.is-invalid]="isFieldInvalid('phone')"
                  placeholder="Enter your phone number"
                />
                <div class="invalid-feedback" *ngIf="isFieldInvalid('phone')">
                  <small *ngIf="registerForm.get('phone')?.errors?.['required']"
                    >Phone number is required</small
                  >
                  <small *ngIf="registerForm.get('phone')?.errors?.['pattern']"
                    >Please enter a valid phone number</small
                  >
                </div>
              </div>

              <!-- Country -->
              <div class="mb-3">
                <label for="country" class="form-label">Country</label>
                <select
                  id="country"
                  formControlName="country"
                  class="form-select"
                  [class.is-invalid]="isFieldInvalid('country')"
                >
                  <option value="">Select your country</option>
                  <option
                    *ngFor="let country of countries"
                    [value]="country.code"
                  >
                    {{ country.name }}
                  </option>
                </select>
                <div class="invalid-feedback" *ngIf="isFieldInvalid('country')">
                  <small
                    *ngIf="registerForm.get('country')?.errors?.['required']"
                    >Country is required</small
                  >
                </div>
              </div>

              <!-- Password -->
              <div class="mb-3">
                <label for="password" class="form-label">Password</label>
                <div class="input-group">
                  <input
                    [type]="showPassword ? 'text' : 'password'"
                    id="password"
                    formControlName="password"
                    class="form-control"
                    [class.is-invalid]="isFieldInvalid('password')"
                    placeholder="Create a strong password"
                  />
                  <button
                    type="button"
                    class="btn btn-outline-secondary"
                    (click)="togglePassword()"
                  >
                    <i
                      [class]="showPassword ? 'bi bi-eye-slash' : 'bi bi-eye'"
                    ></i>
                  </button>
                </div>
                <div
                  class="password-strength mt-2"
                  *ngIf="registerForm.get('password')?.value"
                >
                  <div class="strength-bar">
                    <div
                      class="strength-fill"
                      [style.width.%]="passwordStrength.percentage"
                      [class]="'strength-' + passwordStrength.level"
                    ></div>
                  </div>
                  <small class="text-muted"
                    >Password strength: {{ passwordStrength.text }}</small
                  >
                </div>
                <div
                  class="invalid-feedback"
                  *ngIf="isFieldInvalid('password')"
                >
                  <small
                    *ngIf="registerForm.get('password')?.errors?.['required']"
                    >Password is required</small
                  >
                  <small
                    *ngIf="registerForm.get('password')?.errors?.['minlength']"
                    >Password must be at least 8 characters</small
                  >
                  <small
                    *ngIf="registerForm.get('password')?.errors?.['pattern']"
                    >Password must contain at least one uppercase letter, one
                    lowercase letter, and one number</small
                  >
                </div>
              </div>

              <!-- Confirm Password -->
              <div class="mb-3">
                <label for="confirmPassword" class="form-label"
                  >Confirm Password</label
                >
                <input
                  type="password"
                  id="confirmPassword"
                  formControlName="confirmPassword"
                  class="form-control"
                  [class.is-invalid]="isFieldInvalid('confirmPassword')"
                  placeholder="Confirm your password"
                />
                <div
                  class="invalid-feedback"
                  *ngIf="isFieldInvalid('confirmPassword')"
                >
                  <small
                    *ngIf="registerForm.get('confirmPassword')?.errors?.['required']"
                    >Please confirm your password</small
                  >
                  <small
                    *ngIf="registerForm.get('confirmPassword')?.errors?.['passwordMismatch']"
                    >Passwords do not match</small
                  >
                </div>
              </div>

              <!-- Terms and Conditions -->
              <div class="mb-4">
                <div class="form-check">
                  <input
                    type="checkbox"
                    id="terms"
                    formControlName="acceptTerms"
                    class="form-check-input"
                    [class.is-invalid]="isFieldInvalid('acceptTerms')"
                  />
                  <label for="terms" class="form-check-label">
                    I agree to the
                    <a href="#" class="text-primary">Terms of Service</a> and
                    <a href="#" class="text-primary">Privacy Policy</a>
                  </label>
                </div>
                <div
                  class="invalid-feedback"
                  *ngIf="isFieldInvalid('acceptTerms')"
                >
                  <small>You must accept the terms and conditions</small>
                </div>
              </div>

              <!-- Error Message -->
              <div class="alert alert-danger" *ngIf="errorMessage">
                <i class="bi bi-exclamation-triangle me-2"></i>
                {{ errorMessage }}
              </div>

              <!-- Success Message -->
              <div class="alert alert-success" *ngIf="successMessage">
                <i class="bi bi-check-circle me-2"></i>
                {{ successMessage }}
              </div>

              <!-- Register Button -->
              <button
                type="submit"
                class="btn btn-primary w-100 py-2 mb-3"
                [disabled]="registerForm.invalid || isLoading"
              >
                <span
                  *ngIf="isLoading"
                  class="spinner-border spinner-border-sm me-2"
                ></span>
                <span *ngIf="!isLoading">Create Account</span>
                <span *ngIf="isLoading">Creating Account...</span>
              </button>

              <!-- Debug info - remove after fixing -->
              <div class="mb-3" *ngIf="!registerForm.valid">
                <small class="text-danger">
                  Form is invalid. Check all required fields.
                </small>
                <button
                  type="button"
                  class="btn btn-sm btn-outline-secondary ms-2"
                  (click)="checkFormValidity()"
                >
                  Debug Form
                </button>
              </div>

              <!-- Login Link -->
              <div class="text-center">
                <p class="text-muted mb-0">
                  Already have an account?
                  <a
                    routerLink="/login"
                    class="text-primary text-decoration-none fw-semibold"
                    >Sign In</a
                  >
                </p>
              </div>
            </form>
          </div>
        </div>

        <!-- Next Steps Info -->
        <div class="row mt-4">
          <div class="col-12">
            <div class="next-steps-card p-4 text-center">
              <h6 class="fw-semibold mb-3">After Registration:</h6>
              <div class="row">
                <div class="col-md-4">
                  <div class="step-item">
                    <div class="step-number">1</div>
                    <p class="small mb-0">
                      Upload Certificate of Incorporation
                    </p>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="step-item">
                    <div class="step-number">2</div>
                    <p class="small mb-0">Wait for Admin Verification</p>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="step-item">
                    <div class="step-number">3</div>
                    <p class="small mb-0">Start Posting Jobs</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
